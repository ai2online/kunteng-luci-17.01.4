<%
    local disp = require "luci.dispatcher"                                
    local system_node = disp.get("admin", "settings")
    local childs = disp.node_childs(system_node)

    local request  = disp.context.path
    local c = system_node
    local i, r

    -- tag all nodes leading to this page
    for i, r in ipairs(request) do
        if c.nodes and c.nodes[r] then
            c = c.nodes[r]
            c._menu_selected = true
        end
    end

    if #childs > 0 then
        for i, v in ipairs(childs) do
            local nnode = system_node.nodes[v]
            if nnode.index then 
%>
            <li>
                <a href="<%=luci.dispatcher.build_url("admin", "settings", v)%>">
                <%- if nnode._menu_selected then%>
                <span class="gyphon"> <img src="<%=resource%>/images/connect_03.png"></span>
                <em class="nav-icon"><%=striptags(translate(nnode.title))%></em>
                <%else%>
                <span><img src="<%=resource%>/images/connect_07.png"></span>
                <em class="nav-em"><%=striptags(translate(nnode.title))%></em>
                <%end%>
                </a>
            </li>
<%
            end
        end
    end
%>